#!/bin/bash

if [ "$#" -ne 3 ]; then
    echo "usage: <renderer_check> <api> <output>"
    exit 1
fi

renderer_check=$1
api=$2
output=$3

case $api in
    gles2)
        caselist=$OPENGL_CTS_PATH/data/mustpass/gles/aosp_mustpass/main/gles2-master.txt
        skips=$MESA_ROOT_DIR/.gitlab-ci/all-skips.txt
        ;;
    gles3)
        caselist=$OPENGL_CTS_PATH/data/mustpass/gles/aosp_mustpass/main/gles3-master.txt
        skips=$MESA_ROOT_DIR/.gitlab-ci/all-skips.txt
        ;;
    gles31)
        caselist=$OPENGL_CTS_PATH/data/mustpass/gles/aosp_mustpass/main/gles31-master.txt
        skips=$MESA_ROOT_DIR/.gitlab-ci/all-skips.txt
        ;;
    vk)
        caselist=$VK_GL_CTS_ROOT_DIR/android/cts/main/vk-master.txt
        skips=$MESA_ROOT_DIR/.gitlab-ci/all-skips.txt
        ;;
    *)
        echo "Unknown API: $api"
        exit 1
        ;;
esac

export DEQP_JOBS=8
run_deqp "$renderer_check" "$api" "$caselist" "$skips" "$output"
